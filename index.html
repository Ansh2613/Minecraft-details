<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Minecraft Server</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>🔥 My Minecraft Server</h1>
    <nav>
      <a href="#about">About</a>
      <a href="#plugins">Plugins</a>
      <a href="#status">Status</a>
      <a href="#start">Start Server</a>
    </nav>
  </header>

  <main>
    <section id="about">
      <h2>🌍 Server Info</h2>
      <p><strong>Java IP:</strong> <span id="java-ip">mc1524209.fmcs.cloud</span> <button onclick="copyToClipboard('java-ip')">📋 Copy</button></p>
      <p><strong>Bedrock IP:</strong> <span id="bedrock-ip">mc1524209.fmcs.cloud</span> <button onclick="copyToClipboard('bedrock-ip')">📋 Copy</button></p>
      <p><strong>Version:</strong> Java 1.20.1 / Bedrock (via Geyser)</p>
      <p><strong>Public Page:</strong> <a href="https://freemcserver.net/server/1524209" target="_blank">View Server</a></p>
    </section>

    <section id="status">
      <h2>📊 Server Status</h2>
      <div id="server-status">Checking status...</div>
      <div id="player-count"></div>
      <div id="offline-start-section" style="display: none; margin-top: 15px;">
        <h3>🔧 Server is Offline — Start it below</h3>
        <p>Enter your FreeMcServer Username:</p>
        <input type="text" id="username-offline" placeholder="e.g. ansh2613">
        <button onclick="generateLinkOffline()">Start Server</button>
        <p id="start-link-offline"></p>
      </div>
    </section>

    <section id="start">
      <h2>🔧 Start Server Manually</h2>
      <p>Enter your FreeMcServer Username:</p>
      <input type="text" id="username" placeholder="e.g. ansh2613">
      <button onclick="generateLink()">Generate Start Link</button>
      <p id="start-link"></p>
    </section>

    <section id="plugins">
      <h2>🔌 Plugins</h2>
      <ul>
        <li><a href="https://www.spigotmc.org/resources/restore-skins.2124/" target="_blank">SkinRestorer</a></li>
        <li><a href="https://www.spigotmc.org/resources/viaversion.19254/" target="_blank">ViaVersion</a></li>
        <li><a href="https://luckperms.net/" target="_blank">LuckPerms</a></li>
        <li><a href="https://www.spigotmc.org/resources/vault.34315/" target="_blank">Vault</a></li>
        <li><a href="https://www.spigotmc.org/resources/coreprotect.8631/" target="_blank">CoreProtect</a></li>
        <li><a href="https://www.spigotmc.org/resources/onlinetime.73343/" target="_blank">OnlineTime</a></li>
        <li><a href="https://www.spigotmc.org/resources/picojobs.69111/" target="_blank">PicoJobs</a></li>
        <li><a href="https://www.spigotmc.org/resources/gsit-modern-sit-and-chair-plugin-1-13-1-20-free.62325/" target="_blank">GSit</a></li>
        <li><a href="https://www.spigotmc.org/resources/economyshopgui.69927/" target="_blank">EconomyShopGUI</a></li>
        <li><a href="https://github.com/BeastCraft/BeastLib" target="_blank">BeastLib</a></li>
        <li><a href="https://geysermc.org/" target="_blank">Geyser-Spigot</a></li>
        <li><a href="https://www.spigotmc.org/resources/viabackwards.27448/" target="_blank">ViaBackwards</a></li>
        <li><a href="https://essentialsx.net/" target="_blank">EssentialsX</a></li>
      </ul>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 My Minecraft Server. Hosted via <a href="https://freemcserver.net">FreeMcServer.net</a></p>
  </footer>

  <script>
    const serverIP = "mc1524209.fmcs.cloud";

    async function fetchServerStatus() {
      const res = await fetch(`https://api.mcsrvstat.us/2/${serverIP}`);
      const data = await res.json();
      const statusDiv = document.getElementById("server-status");
      const playersDiv = document.getElementById("player-count");
      const offlineStart = document.getElementById("offline-start-section");

      if (!data.online) {
        statusDiv.innerHTML = "🟥 Server is Offline";
        playersDiv.innerHTML = "";
        offlineStart.style.display = "block";
      } else {
        statusDiv.innerHTML = "🟩 Server is Online";
        playersDiv.innerHTML = `👥 ${data.players.online}/${data.players.max} Players`;
        offlineStart.style.display = "none";
      }
    }

    fetchServerStatus();
    setInterval(fetchServerStatus, 3000); // Refresh every 3 seconds

    function generateLink() {
      const username = document.getElementById("username").value.trim();
      const linkDiv = document.getElementById("start-link");
      if (username) {
        linkDiv.innerHTML = `🔗 <a href="https://freemcserver.net/server/1524209/share/${username}" target="_blank">Start Server as ${username}</a>`;
      } else {
        linkDiv.innerHTML = "⚠️ Enter a valid username!";
      }
    }

    function generateLinkOffline() {
      const username = document.getElementById("username-offline").value.trim();
      const linkDiv = document.getElementById("start-link-offline");
      if (username) {
        linkDiv.innerHTML = `🔗 <a href="https://freemcserver.net/server/1524209/share/${username}" target="_blank">Start Server as ${username}</a>`;
      } else {
        linkDiv.innerHTML = "⚠️ Enter a valid username!";
      }
    }

    function copyToClipboard(id) {
      const text = document.getElementById(id).innerText;
      navigator.clipboard.writeText(text).then(() => {
        alert("Copied: " + text);
      });
    }
  </script>
</body>
</html>
