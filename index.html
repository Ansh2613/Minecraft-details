<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Minecraft Server</title>
  <style>
    body {
      background-color: #111;
      color: white;
      font-family: sans-serif;
      margin: 0;
      padding: 0;
    }

    header {
      padding: 20px;
      text-align: center;
      background-color: #1c1c1c;
      font-size: 2em;
      font-weight: bold;
      color: #00ffe1;
      text-shadow: 0 0 10px #00ffe1;
    }

    .container {
      padding: 20px;
    }

    .section {
      background: #222;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 10px;
    }

    button, .copy-btn {
      background-color: #00ffe1;
      color: #000;
      padding: 8px 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }

    .status {
      font-size: 1.2em;
      margin-bottom: 10px;
    }

    .red { color: #ff5555; }
    .green { color: #00ff90; }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <header>üî• My Minecraft Server</header>

  <div class="container">
    <!-- Server Info -->
    <div class="section">
      <h2>üåê Server Info</h2>
      <p><strong>Java IP:</strong> mc1524209.fmcs.cloud <button class="copy-btn" onclick="copyToClipboard('mc1524209.fmcs.cloud')">Copy</button></p>
      <p><strong>Bedrock IP:</strong> mc1524209.fmcs.cloud <button class="copy-btn" onclick="copyToClipboard('mc1524209.fmcs.cloud')">Copy</button></p>
      <p><strong>Port:</strong> 47112 <button class="copy-btn" onclick="copyToClipboard('47112')">Copy</button></p>
      <p><strong>Quick Join (Bedrock):</strong>
        <a href="minecraft://?addExternalServer=MyServer|mc1524209.fmcs.cloud:47112">
          <button>üì± Connect with Bedrock</button>
        </a>
      </p>
      <p><strong>Version:</strong> Java 1.20.1 / Bedrock (via Geyser)</p>
      <p><strong>Public Page:</strong> <a href="https://freemcserver.net/server/1524209" target="_blank">View Server</a></p>
    </div>

    <!-- Server Status -->
    <div class="section">
      <h2>üìä Server Status</h2>
      <div id="statusDiv" class="status"></div>
      <div id="playersDiv"></div>
      <div id="offlineStart" class="hidden">
        <br />
        <a href="https://freemcserver.net/server/1524209" target="_blank">
          <button>üîÅ Open FreeMcServer Page</button>
        </a>
      </div>
      <div id="expiredRenew" class="hidden">
        <br />
        <a href="https://freemcserver.net/server/1524209" target="_blank">
          <button>üí° Renew Server</button>
        </a>
      </div>
    </div>

    <!-- Plugins -->
    <div class="section">
      <h2>üîå Plugins</h2>
      <ul>
        <li>SkinRestorer</li>
        <li>ViaVersion</li>
        <li>LuckPerms</li>
        <li>Vault</li>
        <li>CoreProtect</li>
        <li>OnlineTime</li>
        <li>PicoJobs</li>
        <li>GSit</li>
        <li>EconomyShopGUI</li>
        <li>BeastLib</li>
        <li>Geyser-Spigot</li>
        <li>ViaBackwards</li>
        <li>EssentialsX</li>
      </ul>
    </div>
  </div>

  <script>
    const statusDiv = document.getElementById("statusDiv");
    const playersDiv = document.getElementById("playersDiv");
    const offlineStart = document.getElementById("offlineStart");
    const expiredRenew = document.getElementById("expiredRenew");

    function copyToClipboard(text) {
      navigator.clipboard.writeText(text);
      alert("Copied: " + text);
    }

    async function fetchServerStatus() {
      try {
        const response = await fetch("https://api.mcstatus.io/v2/status/java/mc1524209.fmcs.cloud:47112");
        const data = await response.json();

        const motdText = data.motd?.clean?.join(" ").toLowerCase();
        const isLikelyExpired = motdText.includes("expired");

        if (isLikelyExpired) {
          statusDiv.innerHTML = '‚ùå <span class="red">Server is Expired. Please renew it.</span>';
          playersDiv.innerHTML = "";
          expiredRenew.style.display = "block";
          offlineStart.style.display = "none";
        } else if (!data.online) {
          statusDiv.innerHTML = 'üî¥ <span class="red">Server is Offline</span>';
          playersDiv.innerHTML = "";
          expiredRenew.style.display = "none";
          offlineStart.style.display = "block";
        } else {
          statusDiv.innerHTML = 'üü¢ <span class="green">Server is Online</span>';
          playersDiv.innerHTML = `üë• ${data.players.online}/${data.players.max} Players`;
          offlineStart.style.display = "none";
          expiredRenew.style.display = "none";
        }

      } catch (error) {
        statusDiv.innerHTML = "‚ö†Ô∏è Error fetching server status.";
        console.error(error);
      }
    }

    fetchServerStatus();
    setInterval(fetchServerStatus, 3000); // Refresh every 3 seconds
  </script>
</body>
</html>
