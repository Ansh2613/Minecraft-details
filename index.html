<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Minecraft Server</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body>
  <header>
    <h1>🔥 My Minecraft Server</h1>
    <button onclick="toggleTheme()">Toggle Theme</button>
  </header>

  <nav>
    <a href="#">About</a>
    <a href="#">Plugins</a>
    <a href="#">Status</a>
  </nav>

  <main>
    <section>
      <h2>🌍 Server Info</h2>
      <p><strong>Java IP:</strong> mc1524209.fmcs.cloud <button onclick="copyToClipboard('mc1524209.fmcs.cloud')">📋 Copy</button></p>
      <p><strong>Bedrock IP:</strong> mc1524209.fmcs.cloud <button onclick="copyToClipboard('mc1524209.fmcs.cloud')">📋 Copy</button></p>
      <p><strong>Server port:</strong> 47112 <button onclick="copyToClipboard('47112')">📋 Copy</button></p>
      <p><strong>Quick Join (Bedrock):</strong> <button onclick="openMinecraftBedrock()">🎮 Connect with Bedrock</button></p>
      <p><strong>Version:</strong> Java 1.20.1 / Bedrock (via Geyser)</p>
      <p><strong>Public Page:</strong> <a href="https://freemcserver.net/server/1524209" target="_blank">View Server</a></p>
    </section>

    <section>
      <h2>📊 Server Status</h2>
      <p id="status"></p>
      <p id="players"></p>
      <div id="offlineStart" style="display:none">
        <button onclick="window.open('https://freemcserver.net/server/1524209', '_blank')">Open FreeMcServer Page</button>
      </div>
      <div id="renewServer" style="display:none">
        <button onclick="window.open('https://freemcserver.net/server/1524209', '_blank')">🔁 Renew Server</button>
      </div>
    </section>

    <section>
      <h2>🔌 Plugins</h2>
      <input type="text" placeholder="Search plugins..." />
      <ul>
        <li>SkinRestorer <a href="#">Details →</a></li>
        <!-- Add more plugins as needed -->
      </ul>
    </section>
  </main>

  <script>
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text);
      alert("Copied: " + text);
    }

    function openMinecraftBedrock() {
      window.location.href = "minecraft://?addExternalServer=MyServer|mc1524209.fmcs.cloud:47112";
    }

    function toggleTheme() {
      document.body.classList.toggle('dark');
    }

    const statusDiv = document.getElementById("status");
    const playersDiv = document.getElementById("players");
    const offlineStart = document.getElementById("offlineStart");
    const renewServer = document.getElementById("renewServer");

    async function fetchServerStatus() {
      try {
        const response = await fetch("https://api.mcstatus.io/v2/status/java/mc1524209.fmcs.cloud");
        const data = await response.json();

        const motdText = data.motd?.clean?.join(" ").toLowerCase();
        const isLikelyExpired = motdText.includes("expired");

        if (isLikelyExpired) {
          statusDiv.innerHTML = "❌ <strong>Server is expired. Please renew it</strong>";
          playersDiv.innerHTML = "";
          renewServer.style.display = "block";
          offlineStart.style.display = "none";
        } else if (!data.online) {
          statusDiv.innerHTML = "🔴 <strong>Server is Offline</strong>";
          playersDiv.innerHTML = "";
          offlineStart.style.display = "block";
          renewServer.style.display = "none";
        } else {
          statusDiv.innerHTML = "🟢 <strong>Server is Online</strong>";
          playersDiv.innerHTML = `👥 ${data.players.online}/${data.players.max} Players`;
          offlineStart.style.display = "none";
          renewServer.style.display = "none";
        }
      } catch (err) {
        statusDiv.innerHTML = "⚠️ <strong>Error checking status</strong>";
        playersDiv.innerHTML = "";
      }
    }

    fetchServerStatus();
    setInterval(fetchServerStatus, 5000);
  </script>
</body>
</html>
